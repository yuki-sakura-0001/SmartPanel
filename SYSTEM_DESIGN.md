# SmartPanel 系統設計與功能規劃

## 1. 專案目標與核心需求

本專案旨在開發一個結合 Quicker 和 uTools 優勢的桌面應用程式 SmartPanel。核心目標是提供一個高效、便捷的工具，讓使用者能夠快速啟動應用程式、執行自定義小工具，並具備強大的全局搜尋能力。

### 1.1 Quicker 功能借鑒

*   **快速啟動面板 (Quick Launch Panel):** 透過自定義熱鍵或滑鼠手勢（例如：中鍵點擊）呼叫出一個可配置的面板，面板上顯示常用應用程式或工具的圖標，使用者可點擊啟動。面板應支援分頁或分類管理，以容納大量項目。
*   **簡易小工具創建 (Easy Gadget Creation):** 提供一個介面，讓使用者能夠簡易地創建和管理自定義的腳本或命令，並將其作為面板上的「小工具」啟動。這些小工具可以是執行特定命令、打開特定文件、訪問特定網頁等。

### 1.2 uTools 功能借鑒

*   **全局搜尋面板 (Global Search Panel):** 透過自定義熱鍵（例如：雙擊 Ctrl）直接呼叫出一個搜尋框，使用者可以在其中輸入關鍵字進行全局搜尋。搜尋結果應即時顯示，並支援模糊匹配。
*   **Everything 支援 (Everything Integration):** 搜尋功能應能整合 Everything 工具，實現對本地文件系統的極速搜尋。這意味著 SmartPanel 需要能夠與 Everything 的 API 或命令列介面進行互動。

### 1.3 SmartPanel 獨有特性

*   **開源與可擴展性:** 專案應保持開源，方便社區協作和功能擴展。
*   **輕量與高效:** 應用程式應盡可能輕量，佔用資源少，啟動和響應速度快。
*   **跨平台潛力:** 雖然初期可能專注於 Windows 平台，但設計時應考慮未來向 macOS 或 Linux 擴展的可能性。

## 2. 系統架構設計

SmartPanel 將採用模組化設計，主要分為以下幾個核心模組：

### 2.1. UI 層 (Presentation Layer)

*   **主面板 (Main Panel):** 負責顯示快速啟動項，支援分頁/分類顯示。使用 PyQt6 實現，提供流暢的用戶體驗。
*   **搜尋面板 (Search Panel):** 負責顯示搜尋框和搜尋結果。同樣使用 PyQt6 實現，提供即時搜尋反饋。
*   **設定/管理介面 (Settings/Management Interface):** 用於管理快速啟動項、小工具、熱鍵配置和搜尋設定。這部分可以是一個獨立的設定窗口或整合到主面板中。

### 2.2. 核心邏輯層 (Core Logic Layer)

*   **熱鍵監聽模組 (Hotkey Listener Module):** 負責監聽全局熱鍵事件，觸發主面板或搜尋面板的顯示/隱藏。目前已有的 `hotkey_listener.py` 將作為基礎。
*   **啟動項管理模組 (Startup Item Manager):** 負責啟動項的增刪改查，包括應用程式路徑、網址、自定義腳本等。目前已有的 `main.py` 和 `add_item_dialog.py` 將作為基礎。
*   **小工具執行模組 (Gadget Executor):** 負責解析和執行自定義小工具的命令或腳本。需要考慮安全性，避免執行惡意代碼。
*   **搜尋引擎整合模組 (Search Engine Integrator):** 負責與 Everything 等外部搜尋工具進行通訊，獲取搜尋結果。這將是本專案的關鍵挑戰之一。

### 2.3. 資料層 (Data Layer)

*   **設定檔 (Settings File):** 使用 JSON 格式儲存所有應用程式設定，包括熱鍵、啟動項列表、搜尋配置等。目前已有的 `settings.json` 將作為基礎。
*   **日誌檔 (Log File):** 記錄應用程式運行日誌，便於調試和問題排查。目前已有的 `smartpanel.log` 將作為基礎。

## 3. 功能規劃與開發步驟

### 3.1. 階段一：完善快速啟動面板 (Quicker 核心功能)

*   **熱鍵監聽優化:** 確保熱鍵監聽穩定可靠，支援更多修飾鍵組合，並能正確區分單擊、雙擊等事件（如果需要）。
*   **啟動項管理:** 實現啟動項的添加、編輯、刪除、排序功能。每個啟動項應包含名稱、路徑（應用程式/網址/腳本）、圖標等屬性。
*   **面板顯示與交互:** 實現面板的顯示/隱藏、居中、拖動、列表項點擊執行、鍵盤導航等基本交互。
*   **分頁/分類功能:** 引入分頁或分類機制，讓使用者可以組織大量的啟動項。
*   **小工具執行器:** 實現一個基礎的小工具執行器，能夠執行簡單的命令或 Python 腳本。

### 3.2. 階段二：整合全局搜尋功能 (uTools 核心功能)

*   **搜尋面板實現:** 設計並實現一個獨立的搜尋面板，包含輸入框和結果列表。
*   **Everything 整合:** 研究 Everything 的 SDK 或命令列介面，實現與其的通訊，獲取搜尋結果。可能需要額外安裝 Everything SDK 或依賴庫。
*   **即時搜尋與結果顯示:** 實現使用者輸入時即時顯示搜尋結果，並支援結果的篩選和排序。
*   **搜尋結果執行:** 點擊搜尋結果能夠打開文件、執行程式或訪問網頁。

### 3.3. 階段三：高級功能與優化

*   **滑鼠手勢觸發:** 實現 Quicker 中提到的滑鼠中鍵觸發面板的功能。
*   **自定義小工具編輯器:** 提供一個更友好的介面，讓使用者可以編寫和測試自定義小工具的腳本。
*   **外觀主題與自定義:** 允許使用者自定義面板的顏色、字體、大小等外觀設置。
*   **插件系統:** 考慮引入插件系統，讓第三方開發者可以為 SmartPanel 擴展功能。
*   **性能優化與打包:** 對應用程式進行性能優化，減少資源佔用。最終將應用程式打包成可執行文件，方便使用者安裝和部署。

## 4. 技術選型

*   **程式語言:** Python (已選定)
*   **GUI 框架:** PyQt6 (已選定)
*   **熱鍵監聽:** pynput (已選定)
*   **檔案搜尋:** Everything SDK (Windows) / 其他跨平台方案 (未來考慮)
*   **版本控制:** Git / GitHub (已選定)

## 5. 開發環境與依賴

*   Python 3.x
*   PyQt6
*   pynput
*   Everything SDK (Windows)

## 6. 風險與挑戰

*   **Everything 整合:** Everything 的整合可能需要處理其 API 的複雜性，或在不同作業系統上尋找替代方案。
*   **全局熱鍵衝突:** 確保 SmartPanel 的熱鍵不會與系統或其他應用程式的熱鍵衝突。
*   **性能優化:** 隨著功能的增加，需要持續關注應用程式的性能，確保其輕量和響應迅速。
*   **跨平台兼容性:** 如果未來考慮跨平台，則需要處理不同作業系統的差異性。

## 7. 開發日誌 (DEVELOPMENT_LOG.md)

將持續更新 `DEVELOPMENT_LOG.md` 文件，記錄開發進度、遇到的問題和解決方案。

## 8. 結論

SmartPanel 專案將分階段進行，從完善核心的快速啟動面板開始，逐步整合全局搜尋功能，並最終實現更多高級特性。透過模組化設計和開源協作，我們有信心打造一個高效、實用的桌面工具。


